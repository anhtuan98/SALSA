<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Salsa Deployment Engine</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="scripts/jquery-1.3.2.debug.js" type="text/javascript"></script>
<script src="scripts/json.debug.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://d3js.org/d3.v3.js"></script>
<script src="scripts/toastr.js"></script> <!-- Notification -->
<script src="scripts/jquery.tipsy.js"></script> <!-- Tooltips -->
<script src="scripts/jquery-ui-1.10.4.custom.min.js"></script> <!-- jquery.ui for box -->
<script src="scripts/jquery.ui-contextmenu.js"></script>
<script src="scripts/spin.js"></script>


<link href="css/toastr.css" rel="stylesheet"/>
<link href="css/default.css" rel="stylesheet" type="text/css" />
<link href="css/runtimeTree.css" rel="stylesheet" type="text/css" />
<link href="css/jquery.tipsy.css" rel="stylesheet" type="text/css" />
<link href="css/ui-lightness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet" type="text/css" />
<link href="css/ui-lightness/jquery-ui-1.10.4.custom.css" rel="stylesheet" type="text/css" />



<script type="text/javascript">
	
	window.onerror=function(msg, url, linenumber){
	 alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber)
	 return true
	}

	function getURLParameter(name) {
		return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
	}
    
	$.ajaxSetup({
	    cache: false
	});

    
    toastr.options = {
  		  "closeButton": false,
  		  "debug": false,
  		  "positionClass": "toast-top-right",
  		  "onclick": null,
  		  "showDuration": "300",
  		  "hideDuration": "1000",
  		  "timeOut": "12000",
  		  "extendedTimeOut": "1000",
  		  "showEasing": "swing",
  		  "hideEasing": "linear",
  		  "showMethod": "fadeIn",
  		  "hideMethod": "fadeOut"
  		};
    
    //var salsaCenterRestEndpoint="http://128.130.172.215:8080/salsa-engine/rest";
    var salsaCenterRestEndpoint="/salsa-engine/rest";
    
</script>


</head>
<body>

<script type="text/javascript">
window.onload = loadPart;

function loadPart(){
	if (!!getURLParameter("id")){		
		$("#serviceRuntimeList").load("ServiceRuntimeBrieftlyDescription.html");
		$("#serviceRuntimeTable").load("ServiceRuntimeTable.html");		
		showAppStructure();
	} else {
		$("#deploymentForm").load("DeploymentForm.html");
		$("#serviceRuntimeList").load("ServiceRuntimeList.html");
	}
}

function showDeploymentInfo(){
	//$("#treeView").load("ServiceRuntimeTreeView.html");
	var treeDiv = document.getElementById("treeView");
	treeDiv.innerHTML = "";
	var button = document.createElement('input');
	button.type = "button";
	button.value = "Switch to application structure view";
	button.setAttribute("name", "switchAppStructure");
	button.setAttribute("onClick", "showAppStructure();");
	treeDiv.appendChild(button);
	
	var iframe = document.createElement('iframe');	
    iframe.setAttribute('src', "/salsa-engine/ServiceRuntimeTreeView.html?id=" + getURLParameter("id"));
    iframe.setAttribute('style', 'width:100%; height:100%; overflow:hidden; box-shadow: 0px 0px 4px 4px #ffffff;');
    iframe.setAttribute('frameborder', '0');
    
    treeDiv.appendChild(iframe);
}

function showAppStructure(){
	//$("#treeView").load("ServiceRuntimeTreeView_Simple.html");	
	var treeDiv = document.getElementById("treeView");	
	treeDiv.innerHTML = "";
	var button = document.createElement('input');
	button.type = "button";
	button.value = "Switch to deployment information view";
	button.setAttribute("name", "switchAppStructure");
	button.setAttribute("onClick", "showDeploymentInfo();");
	treeDiv.appendChild(button);
	
	var iframe = document.createElement('iframe');
    iframe.setAttribute('src', "/salsa-engine/ServiceRuntimeTreeView_Simple.html?id=" + getURLParameter("id"));
    iframe.setAttribute('style', 'width:100%; height:100%; overflow:hidden; box-shadow: 0px 0px 4px 4px #ffffff;');
    iframe.setAttribute('frameborder', '0');
    
    treeDiv.appendChild(iframe);
}


</script>
<div>
	<div style="float:left; width: 100%;">
		<div id="deploymentForm"></div>
		<hr/>
		<div id="serviceRuntimeList"></div>
		<hr/>		
		<div id="treeView" style="width: 100%; height: auto;"></div>
		<hr/>
		<div id="serviceRuntimeTable"></div>
	</div>
	<div style="float:left;">
		<div id="serviceTemplateTable"></div>
	</div>
</div>

<!-- 	<div class="content"> -->
<!-- 		<div class="background block_1"> -->
<!-- 		</div> -->
<!-- 		<div class="left_block block_1"> -->
<!-- 			<div class="content"> -->
<!-- 				<div class="top_block block_3"> -->
<!-- 					<div class="content" id="deploymentForm"> -->
<!-- 					</div> -->
<!-- 				</div> -->
<!-- 				<div class="top_block block_4"> -->
<!-- 					<div class="content" id="serviceRuntimeTable"> -->
<!-- 					</div> -->
<!-- 				</div> -->
<!-- 			</div> -->
<!-- 		</div> -->
<!-- 		<div class="background block_2"> -->
<!-- 		</div> -->
<!-- 		<div class="left_block block_2"> -->
<!-- 			<div class="content"> -->
<!-- 				<div class="top_block block_5"> -->
<!-- 					<div class="content" id="serviceTemplateTable"> -->
<!-- 					</div> -->
<!-- 				</div> -->
<!-- 				<div class="top_block block_6"> -->
<!-- 					<div class="content" id="artifactTable"> -->
<!-- 					</div> -->
<!-- 				</div> -->
<!-- 			</div> -->
<!-- 		</div> -->
<!-- 	</div> -->







</body>
</html>