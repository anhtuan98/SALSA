<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Salsa Deployment Engine</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="scripts/jquery-1.3.2.debug.js" type="text/javascript"></script>
<script src="scripts/json.debug.js" type="text/javascript"></script>

<link href="default.css" rel="stylesheet" type="text/css" />

<script> 
    $(function(){
      $("#deploymentInfo").load("ServiceRuntime.html"); 
    });
</script>

</head>
<body>


<script type="text/javascript">

window.onerror=function(msg, url, linenumber){
 alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber)
 return true
}
</script>


<h3>Deploy a Tosca file</h3>
<form id="inputForm" action='rest/deploy' method='post' enctype="multipart/form-data">
	Tosca file: <input type='file' name='file' id='file'>
	<br/>
	Service name:<input type='text' name='serviceName' id='serviceName'> 
	<br/>
	<button name="deployBtn" id="deployBtn" onclick="clickDeploy()">Deploy jquery !</button>	
	<input type="submit" value="Deploy form !">
</form>

<hr />
<form id="inputForm2" action='rest/test' method='post' enctype="multipart/form-data">
	Click to POST a test
	<input type="submit" value="Deploy !">
</form>


 <script type="text/javascript">
 function clickDeploy(){
	 alert("Submitted");
	 
	 
    $("#inputForm").submit(function() {
    	$.post
      $.ajax({
        type: "POST",
        url: "rest/deploy",
        dataType: 'html',
        data: $("#inputForm").serializeArray(),
        beforeSend: function() {
        	alert("SENDING..");
        	$("#deployBtn").html('Sending....');
          },
        success: function(data) {
        	alert("Reloaded");
        	$("#deployBtn").html('Update');
    		top.reload();
        }
        });
    return false;
	});   
 }
    </script>



<div id="deploymentInfo"></div>






</body>
</html>