<h3>Build from source code</h3>
SALSA is built by maven and JDK 1.8+. After checkout the source code from Github, run the default maven build command:
<pre><code>mvn clean install
</code></pre>
There are many sub-modules will to be built. The ready-to-use artifacts are put together in the standalone module. User will find in the <code>target</code> folder:
<ul>
  <li>salsa-engine.jar: the main service.
  <li>salsa-pioneer.jar: the configuration agent.
  <li>collector.jar: the information collector.
  <li>./extensions folder: contains collector plug-in modules.
  <li>salsa-client.jar: commandline client.
</ul>
The structure in the target folder is ready to run, salsa-engine will search for other artifacts in the same folder.









<h3>Configure SALSA's parameters</h3>
The parameters for SALSA are in the file ./salsa.engine.properties. The variables are set as default if not available or no configuration file is not found.
<code><pre>
# The IP and PORT of the salsa-engine, normally it will be detected, except the case of floating IP or proxy.
# These options will be obsolete soon. Currently we need them for downloading default artifact.
SALSA_CENTER_IP=(will be detected)
SALSA_CENTER_PORT=8080

# The directory that SALSA works on.
SALSA_CENTER_WORKING_DIR=/tmp/salsa-engine
SALSA_PIONEER_WORKING_DIR=/tmp/salsa-pioneer

# The credential file to connect to clouds
CLOUD_USER_PARAMETERS=./cloudUserParameters.ini

# The message queue broker for SALSA's internal communication
BROKER=tcp://iot.eclipse.org:1883
BROKER_TYPE=mqtt

# The message queue broker for publishing events to external services or users.
EXPORT_BROKER=tcp://iot.eclipse.org:1883
EXPORT_BROKER_TYPE=mqtt
</pre></code>

<p>Currently, SALSA supports two BROKER_TYPE: mqtt and ampq. The BROKER's endpoint depends on the the BROKER_TYPE. All the components of SALSA will try to connect to the queue at start, thus they will be failed if the queue is incorrect. These configurations will be passed to other components by salsa-engine, so the whole SALSA framework can share the same message queue.</p> 







<h3>Configure user credentials for clouds</h3>
<p>The cloud settings are on the file ./cloudUserParameters.ini. The parameters are different for various clouds. Currently there are three SALSA-enabled clouds as belows:
<code><pre>
[&ltmysite&gt@openstack]
username=&ltOpenStack username&gt
password=&ltOpenStack password&gt
tenant=&ltProject name, tenant name&gt
keystone_endpoint=&ltURL to keystone service, e.g http://.../identity/v2.0/&gt
port=&ltkeystone port&gt
sshKeyName=&ltthe keypair name, which created by openstack&gt
location=&ltoptional localtion information&gt

[&ltmysite&gt@flexiant]
email=&ltaccount email&gt
customerUUID=
password=
endpoint=&ltThe endpoint to JADE API of the datacenter&gt
vdcUUID=&ltdefault value&gt
defaultProductOfferUUID=&ltdefault value&gt
clusterUUID=&ltdefault value&gt
networkUUID=&ltdefault value&gt
sshkey=&ltssh key which will be push to the VM&gt

[&ltmysite&gt@stratuslab]
Endpoint=&ltVM service endpoint&gt
pdisk_endpoint=&ltStorage service endpoint&gt
marketplace_endpoint=&ltMarketplace service endpoint&gt
username=&ltuser name&gt
password=&ltpassword&gt
client_path=&ltlocal path to the client package&gt
</pre></code>

SALSA enables to run the application purely on Docker and do not require any cloud credenntial. Please refer to the examples for more details.


<h3>Run the salsa-engine</h3>
<p>Run the main service (salsa-engine) by the command: <code>java -jar salsa-engine.jar --httpPort portNumber</code>. SALSA runs on port 8080 by default and creates the working directory if need. The log files for developer are put into the folder <strong>logs</strong> in the working directory. When SALSA is successful started, user can use salsa-client or access to the WebUI (by default at http://localhost:8080/salsa-engine) to check the status.</p>



<a name="populate_collector"></a>
<h3>Populate the collectors and adaptors</h3>
<p>
The collectors and adaptors are a set of .jar artifact, where collector.jar is executable. The figure below shows how to inject adaptors to a collector. When receiving a query, the collector will scan all the <i>extensions</i> folder for the adaptors and execute appropriate functions. The custom settings for the adaptors can be put in the adaptor.conf.
</p>

<p>The collector can be execute via normal java: "java -jar collector.jar"</p>
<img src="images/ss-populate-output.png" alt="Populate the collectors and adaptors" width="70%" height="70%">
<p>
Above folder structure can be created manually or using salsa-client. Salsa-client will inform salsa-pioneer to deploy the collector as a normal software component on the infrastructure.
</p>


<h3>Using the salsa-client</h3>
<p>Sys-admin can use Salsa-client to manage the system. Available commands is shown via --help option:</p>
<code><pre>
./salsa-client --help
Usage: java -jar salsa-client.jar
SALSA Java command-line client

 -a (--address) &ltaddress&gt : The address of the salsa engine (default:
                            128.130.172.216)
 -h (--help)              : Print the help and exit (default: true)
 -p (--port) &ltport&gt       : The port of the salsa engine (default: 8080)

Type 'java -jar salsa-client.jar help &ltcommand&gt' for help on a specific command.

Available commands:
  collector-list-adaptor: Get the list of available collector plugins. 
  collector-push-adaptor: Add a collector plugin to collector to collect information. 
  collector-start     : Start a collector to collect the information 
  collector-stop      : Stop a collector by ID or at salsa-engine 
  instance-deploy     : Deploy one or more instances of a service unit. 
  instance-info-collect: Ask collector to start gathering the information. The process may take time. 
  instance-query      : Get the information of an instance by ID. 
  instance-remove     : Remove an running instance. 
  meta                : Get metadata of the SALSA which is connected. 
  service-list        : List the current managed cloud services 
  service-remove      : Undeploy all components and remove the cloud services. 
  service-status      : Get all the list of instances 
  service-submit      : Submit a TOSCA to start a deployment. 
  syn                 : Send message the synchronize pioneers.
</pre></code>
Beside the commands that manage the system, some commands are for populating the adaptor and configuring with external services to collecting external capabilities. Collector manages adaptors and communicates with salsa-engine. The salsa-client can send the request to salsa-engine or salsa-pioneer to start/stop a collector. When a collector is running, salsa-client pushes and configures adaptor on the collector.

